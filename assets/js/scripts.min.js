!function(a){const o=a(".wh-notices-area"),t=a(".wh-todo-inner");function e(a,t){o.append('<div class="wh-notice wh-'+a+'">'+t+"</div>")}function d(){o.text("")}function n(){a(".wh-todo-item").each(function(){const o=a(this),n=o.data("id");o.find(".wh-todo-done").on("click",function(s){s.preventDefault();const i=a(this).data("status");t.addClass("wh-loading"),d(),a.ajax({type:"POST",url:whConfig.adminAjaxUrl,data:{action:"wh_todo_change_status",status:i,id:n,todo_nonce:whConfig.todoNonce},success:a=>{a.success&&a.data.updated&&(t.removeClass("wh-loading"),"actual"===i?(o.removeClass("wh-status-done").addClass("wh-status-actual"),o.find("input").prop("disabled",!1)):(o.removeClass("wh-status-actual").addClass("wh-status-done"),o.find("input").prop("disabled",!0)))},error:a=>{e("error",a.responseJSON.data)}})}),o.find(".wh-todo-delete").on("click",function(s){s.preventDefault(),t.addClass("wh-loading"),d(),a.ajax({type:"POST",url:whConfig.adminAjaxUrl,data:{action:"wh_todo_delete",id:n,todo_nonce:whConfig.todoNonce},success:a=>{a.success&&a.data.updated&&(o.remove(),t.removeClass("wh-loading"))},error:a=>{e("error",a.responseJSON.data)}})}),o.find("input").on("keyup",function(o){o.preventDefault();const s=a(this).val();t.addClass("wh-loading"),d(),a.ajax({type:"POST",url:whConfig.adminAjaxUrl,data:{action:"wh_todo_update",id:n,text:s,todo_nonce:whConfig.todoNonce},success:a=>{a.success&&a.data.updated&&t.removeClass("wh-loading")},error:a=>{e("error",a.responseJSON.data)}})})})}a(".wh-todo-create").on("click",function(o){o.preventDefault(),t.addClass("wh-loading"),a.ajax({type:"POST",url:whConfig.adminAjaxUrl,data:{action:"wh_todo_create",todo_nonce:whConfig.todoNonce},success:o=>{o.success&&o.data.updated&&(t.removeClass("wh-loading"),a(".wh-todo-item-example").clone().appendTo(".wh-todo-items").removeClass("wh-todo-item-example wh-hidden").addClass("wh-todo-item wh-status-actual").data("id",o.data.id).attr("data-id",o.data.id),n())},error:a=>{e("error",a.responseJSON.data)}})}),n()}(jQuery);