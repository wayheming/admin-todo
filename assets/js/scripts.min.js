!function(a){let t=a(".wh-notices-area"),e=a(".wh-todo-inner");function o(a,e){t.append('<div class="wh-notice wh-'+a+'">'+e+"</div>")}function d(){t.text("")}function n(){a(".wh-todo-item").each(function(){let t=a(this),n=t.data("id");t.find(".wh-todo-done").on("click",function(s){s.preventDefault();let i=a(this).data("status");e.addClass("wh-loading"),d(),a.ajax({type:"POST",url:wh_config.adminAjaxUrl,data:{action:"wh_todo_change_status",status:i,id:n,todo_nonce:wh_config.todoNonce},success:a=>{a.success&&a.data.updated&&(e.removeClass("wh-loading"),"actual"===i?(t.removeClass("wh-status-done").addClass("wh-status-actual"),t.find("input").prop("disabled",!1)):(t.removeClass("wh-status-actual").addClass("wh-status-done"),t.find("input").prop("disabled",!0)))},error:a=>{o("error",a.responseJSON.data)}})}),t.find(".wh-todo-delete").on("click",function(s){s.preventDefault(),e.addClass("wh-loading"),d(),a.ajax({type:"POST",url:wh_config.adminAjaxUrl,data:{action:"wh_todo_delete",id:n,todo_nonce:wh_config.todoNonce},success:a=>{a.success&&a.data.updated&&(t.remove(),e.removeClass("wh-loading"))},error:a=>{o("error",a.responseJSON.data)}})}),t.find("input").on("keyup",function(t){t.preventDefault();let s=a(this).val();e.addClass("wh-loading"),d(),a.ajax({type:"POST",url:wh_config.adminAjaxUrl,data:{action:"wh_todo_update",id:n,text:s,todo_nonce:wh_config.todoNonce},success:a=>{a.success&&a.data.updated&&e.removeClass("wh-loading")},error:a=>{o("error",a.responseJSON.data)}})})})}a(".wh-todo-create").on("click",function(t){t.preventDefault(),a.ajax({type:"POST",url:wh_config.adminAjaxUrl,data:{action:"wh_todo_create",todo_nonce:wh_config.todoNonce},success:t=>{t.success&&t.data.updated&&(a(".wh-todo-item-example").clone().appendTo(".wh-todo-items").removeClass("wh-todo-item-example wh-hidden").addClass("wh-todo-item wh-status-actual").data("id",t.data.id).attr("data-id",t.data.id),n())},error:a=>{o("error",a.responseJSON.data)}})}),n()}(jQuery);